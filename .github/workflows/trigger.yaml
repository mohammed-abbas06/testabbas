name: Tag version

on:
  workflow_dispatch:

env:
  VERSION: 3.0.${{ github.run_number }}

concurrency:
  group: pre-prod
  cancel-in-progress: true

permissions:
  id-token: write
  contents: write
  checks: write

jobs:


  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: deploy stage 
        uses: ./.github/workflows/check-matrix.yaml
        with:
          version: ${{ env.VERSION }}

  tag-myjob:
    runs-on: ubuntu-latest
    needs: build-deploy
    steps:
      - uses: actions/checkout@v4
      - name: Trigger check-matrix workflow
        run: |
          echo "success"

name: ems_po_legacy_service
run-name: ${{ github.actor }} triggered ems po legacy service stack deploy

on:
  push

permissions:
  id-token: write
  contents: read
  
env:
  region: 'us-west-2'
  prod_deploy: 'false'

jobs: 
  sam_deployment:
    runs-on: ubuntu-latest
    
    steps:
      - name: Build with Gradle    
        if: success() || failure()
        id: build_step
        run: echo "true"
      
      - name: test
        if: success() || failure()
        run: |
            if echo "${{steps.build_step.outcome}}" | grep -Eq 'success'; then
              echo "build=success"
              build_status="success"
            else
              echo "build=failed"
              build_status="failed"
            fi
            echo "build_status=$build_status" >> $GITHUB_ENV
            echo $build_status
            echo "this is $build_status" 

